# Laboratory of Applied Robotisc Project
Final Work of the Laboratory of Applied Robotics course helded in the accademic year 2018/2019 by professor Luigi Palopoli and his teaching assistant Paolo Bevilacqua.
This project has been done by me(Simone Zamboni) and my colleague Sergio Catalano, it took a very long time and a lot of sleepless nights to complete, but in the end the result is worth the effort, as I hope you will see.

The challenge was the following: there is a camera attatched to a cieling taking pictures like this:
![alt text](https://github.com/SZamboni/LabAppliedRobotics/blob/master/data/test_imgs/2018-12-19-175402.jpg)
The robot has a light blue triangle on top of it indicating its orientation, it has to pass to all the green circle avoiding touching the black walls and the red obstacles and then go to the blue rectangle that is the exit. 
There are two tipes of mission, in the first the robot has to pass on top of every green circle in the order dictated by the number inside the circle and then go to the exit in the least time possible, while in the second mission the number on the circle doesn't matter and every time the robot pass on top of each circle it gains seconds, so the robot has to compute which green circle is convenient to pick and wich not and in wich order, keeping in mind that at the end it has to go to the blue rectangle (the exit).
The algorithm has also to localize the center of the robot, and that's why there are white circle around the board, because they are in the same plane of the triangle of the robot (around 15cm from the ground).

Our implementation uses OpenCV in order to reconstruct the map of the environment, and then we use the line sweep algorithm to find a graph in the collision free space and from that we compute the bast path and try to follow it using Dubins Curves.
So we have this image from the camera:
![alt text](https://github.com/SZamboni/LabAppliedRobotics/blob/master/doc/readmeImg1.png)
We compute the logical map using OpenCV:
![alt text](https://github.com/SZamboni/LabAppliedRobotics/blob/master/doc/readmeImg2.png)
We inflate the obstacles so we can consider the robot as point:
![alt text](https://github.com/SZamboni/LabAppliedRobotics/blob/master/doc/readmeImg3.png)
Then we have to compute the path, following these steps:
1. Using the line sweep algorithm the obestacle free parts of the map are dividen in polygons with four vertices
2. The central and border points of these obstacles are used to create a graph of the obstacle free parts of the map
3. The A-star algorithm finds the shortest path to arrive at the destination from the starting point
4. A Dubins Curve tries to connect the start point to the end point. If it's impossible we try to fit a curve between the starting point and the middle point in the path found by the A-star algorithm, and then from this point to the end point. This procedure is done recursively until either a valid path has been found or it's impossible to conncet the two points.
![alt text](https://github.com/SZamboni/LabAppliedRobotics/blob/master/doc/readmeImg4.png)

This path planning alrogithm can be very powerfoul, in this case it starts from the left and visits in order all the green cicles to then go to the blue exit:
![alt text](https://github.com/SZamboni/LabAppliedRobotics/blob/master/doc/readmeImg5.jpg)

Notes on project structure and implementation:
In the folder "doc" you can find the final presentation (highly recommended if you want a more in detail overview of the project), the UML of all the classes and the documentation generated by doxygen.
In "data" there are some test data, in "include" there are all the .hpp files while in "src" there are all the .cpp files, in the "input" folder there are the configuration files that the program reads every time it runs, we have a makefile generating an executable called "lar".

